---
id: error-handling
title: Error Handling
sidebar_label: Error Handling
---

## All our functions will throw one of these four types of errors:

- ```GENERAL_ERROR```
- ```UNAUTHORISED```
- ```UNAUTHORISED_AND_TOKEN_THEFT_DETECTED```
- ```TRY_REFRESH_TOKEN```

### ```GENERAL_ERROR```
- Type: ```{errType: SuperTokens.Error.GENERAL_ERROR, err: any}```
- The ```err``` object inside the thrown error will be the actual error generated by whatever cause this error.
- This is the most general type of error. Can be thrown for a variety of reasons:
    - ```MySQL``` issues - not reachable, instance crash, etc.
    - Any error while creating or using the ```crypto``` library
    - Generic "Something went wrong" errors.
- The way to handle this error is to simply send a status code of ```500```.

### ```UNAUTHORISED```
- Type: ```{errType: SuperTokens.Error.UNAUTHORISED, err: any}```
- The ```err``` object inside the thrown error will be the actual error generated by whatever cause this error.
- This error is thrown when the library is sure that this user's session does not exist anymore. This can happen:
    - If the refresh token expires.
    - If the user clears the cookies.
    - If the session has been revoked or the user has logged out
- With express: Ask the user to login again.
- Without express: <span class="highlighted-text">Clear all auth cookies</span>, and ask the user to login once again.

### ```UNAUTHORISED_AND_TOKEN_THEFT_DETECTED```
- Type: ```{errType: SuperTokens.Error.UNAUTHORISED_AND_TOKEN_THEFT_DETECTED, err: { sessionHandle: string, userId: string | number }}```
- This is thrown when we detect token theft.
- Using the ```err``` object, you can revoke the affected user's current session, or all their sessions.
- With express: Ask the user to login again.
- Without express: <span class="highlighted-text">Clear all auth cookies</span>, and ask the user to login once again.

### ```TRY_REFRESH_TOKEN```
- Type: ```{errType: SuperTokens.Error.TRY_REFRESH_TOKEN, err: any}```
- The ```err``` object inside the thrown error will be the actual error generated by whatever cause this error.
- This error is thrown when:
    - Access token validation failed.
    - CSRF token validation failed. (If ```enableAntiCsrf``` in the ```config``` object is set to ```true```)
- The way to handle this error is to <span class="highlighted-text"><b>NOT</b> clear the cookies</span> and send a session expired status code to your frontend. Our frontend SDK will take care of calling your refresh token API for you.
- If you are building a website and get this error for a <code>GET API</code> that returns <code>HTML</code>, then you should reply with  <code>HTML & JS</code> that calls your refresh session endpoint. Once that is successful, your frontend code should redirect the browser to call again the original <code>GET</code> API. More details on this in the frontend section.

## Detecting if the error is from SuperTokens or from somewhere else:
### Call the ```isErrorFromAuth``` function: [API Reference](api-reference#iserrorfromautherr)
```js
SuperTokens.Error.isErrorFromAuth(err);
```
- Returns ```true``` if the ```err``` is from the SuperTokens lib (i.e. it has one of the types mentioned above).